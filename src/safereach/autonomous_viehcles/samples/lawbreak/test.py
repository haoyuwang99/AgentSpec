from websocket import create_connection
import json


if __name__ == "__main__":
    url = "ws://localhost:8899/websocket"
    ws = create_connection(url)

    #set model
    ws.send(
        json.dumps({"action":"metadata","data":{"info":{"code":0,"data":{"dataHandlerInfo":{"apollo.dreamview.CameraUpdate":{"channels":[{"channelName":"/apollo/sensor/camera/front_12mm/image","msgType":"","protoPath":""},{"channelName":"/apollo/sensor/camera/raw/default","msgType":"","protoPath":""},{"channelName":"/apollo/sensor/camera/front_6mm/image","msgType":"","protoPath":""}],"dataName":"camera","differentForChannels":"true","msgType":"apollo.dreamview.CameraUpdate","protoPath":"modules/dreamview/proto/camera_update.proto","websocketInfo":{"websocketName":"camera","websocketPipe":"/camera"}},"apollo.dreamview.Cyber":{"channels":[{"channelName":"/apollo/prediction/perception_obstacles","msgType":"apollo.perception.PerceptionObstacles","protoPath":"modules/common_msgs/perception_msgs/perception_obstacle.proto"},{"channelName":"/apollo/control/pad","msgType":"apollo.control.PadMessage","protoPath":"modules/common_msgs/control_msgs/pad_msg.proto"},{"channelName":"/apollo/planning/pad","msgType":"apollo.planning.PadMessage","protoPath":"modules/common_msgs/planning_msgs/pad_msg.proto"},{"channelName":"/apollo/sensor/camera/right_fisheye/video/compressed","msgType":"apollo.drivers.CompressedImage","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/storytelling","msgType":"apollo.storytelling.Stories","protoPath":"modules/common_msgs/storytelling_msgs/story.proto"},{"channelName":"/apollo/sensor/camera/left_fisheye/video/compressed","msgType":"apollo.drivers.CompressedImage","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/sensor/camera/front_6mm/video/compressed","msgType":"apollo.drivers.CompressedImage","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/planning/command_status","msgType":"apollo.external_command.CommandStatus","protoPath":"modules/common_msgs/external_command_msgs/command_status.proto"},{"channelName":"/apollo/sensor/camera/front_12mm/image","msgType":"apollo.drivers.Image","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/sensor/camera/raw/default","msgType":"apollo.drivers.Image","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/sensor/camera/front_6mm/image","msgType":"apollo.drivers.Image","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/monitor/system_status","msgType":"apollo.monitor.SystemStatus","protoPath":"modules/common_msgs/monitor_msgs/system_status.proto"},{"channelName":"/apollo/navigation","msgType":"apollo.relative_map.NavigationInfo","protoPath":"modules/common_msgs/planning_msgs/navigation.proto"},{"channelName":"/apollo/audio_detection","msgType":"apollo.audio.AudioDetection","protoPath":"modules/common_msgs/audio_msgs/audio.proto"},{"channelName":"/apollo/dreamview/plugins/studio_connector/plugin_response","msgType":"apollo.dreamview.DvPluginMsg","protoPath":"modules/dreamview/proto/dv_plugin_msg.proto"},{"channelName":"/apollo/task_manager","msgType":"apollo.task_manager.Task","protoPath":"modules/common_msgs/task_manager_msgs/task_manager.proto"},{"channelName":"/apollo/monitor","msgType":"apollo.common.monitor.MonitorMessage","protoPath":"modules/common_msgs/monitor_msgs/monitor_log.proto"},{"channelName":"/apollo/sensor/camera/front_12mm/video/compressed","msgType":"apollo.drivers.CompressedImage","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/dreamview/plugins/studio_connector/dv_request","msgType":"apollo.dreamview.DvPluginMsg","protoPath":"modules/dreamview/proto/dv_plugin_msg.proto"},{"channelName":"/apollo/drive_event","msgType":"apollo.common.DriveEvent","protoPath":"modules/common_msgs/basic_msgs/drive_event.proto"},{"channelName":"/apollo/sensor/camera/rear_6mm/video/compressed","msgType":"apollo.drivers.CompressedImage","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/routing_response","msgType":"apollo.routing.RoutingResponse","protoPath":"modules/common_msgs/routing_msgs/routing.proto"},{"channelName":"/apollo/common/latency_records","msgType":"apollo.common.LatencyRecordMap","protoPath":"modules/common/latency_recorder/proto/latency_record.proto"},{"channelName":"/apollo/hmi/status","msgType":"apollo.dreamview.HMIStatus","protoPath":"modules/common_msgs/dreamview_msgs/hmi_status.proto"},{"channelName":"/apollo/prediction","msgType":"apollo.prediction.PredictionObstacles","protoPath":"modules/common_msgs/prediction_msgs/prediction_obstacle.proto"},{"channelName":"/apollo/audio_event","msgType":"apollo.audio.AudioEvent","protoPath":"modules/common_msgs/audio_msgs/audio_event.proto"},{"channelName":"/apollo/localization/pose","msgType":"apollo.localization.LocalizationEstimate","protoPath":"modules/common_msgs/localization_msgs/localization.proto"},{"channelName":"/apollo/control","msgType":"apollo.control.ControlCommand","protoPath":"modules/common_msgs/control_msgs/control_cmd.proto"},{"channelName":"/apollo/canbus/chassis","msgType":"apollo.canbus.Chassis","protoPath":"modules/common_msgs/chassis_msgs/chassis.proto"},{"channelName":"/apollo/planning","msgType":"apollo.planning.ADCTrajectory","protoPath":"modules/common_msgs/planning_msgs/planning.proto"},{"channelName":"/apollo/planning/command","msgType":"apollo.planning.PlanningCommand","protoPath":"modules/common_msgs/planning_msgs/planning_command.proto"},{"channelName":"/apollo/planning/learning_data","msgType":"apollo.planning.PlanningLearningData","protoPath":"modules/planning/planning_base/proto/learning_data.proto"},{"channelName":"/apollo/planning_command_history","msgType":"apollo.planning.PlanningCommand","protoPath":"modules/common_msgs/planning_msgs/planning_command.proto"}],"dataName":"cyber","differentForChannels":"true","msgType":"","protoPath":"","websocketInfo":{"websocketName":"channelsinfo","websocketPipe":"/channelsinfo"}},"apollo.dreamview.HMIStatus":{"channels":[],"dataName":"hmistatus","differentForChannels":"false","msgType":"apollo.dreamview.HMIStatus","protoPath":"modules/common_msgs/dreamview_msgs/hmi_status.proto","websocketInfo":{"websocketName":"hmistatus","websocketPipe":"/hmistatus"}},"apollo.dreamview.Obstacles":{"channels":[{"channelName":"/apollo/prediction/perception_obstacles","msgType":"","protoPath":""}],"dataName":"obstacle","differentForChannels":"true","msgType":"apollo.dreamview.Obstacles","protoPath":"modules/dreamview_plus/proto/obstacle.proto","websocketInfo":{"websocketName":"obstacle","websocketPipe":"/obstacle"}},"apollo.dreamview.PointCloud":{"channels":[],"dataName":"pointcloud","differentForChannels":"true","msgType":"apollo.dreamview.PointCloud","protoPath":"modules/dreamview/proto/point_cloud.proto","websocketInfo":{"websocketName":"pointcloud","websocketPipe":"/pointcloud"}},"apollo.dreamview.SimulationWorld":{"channels":[],"dataName":"simworld","differentForChannels":"false","msgType":"apollo.dreamview.SimulationWorld","protoPath":"modules/common_msgs/dreamview_msgs/simulation_world.proto","websocketInfo":{"websocketName":"simworld","websocketPipe":"/simworld"}},"apollo.hdmap.Map":{"channels":[],"dataName":"map","differentForChannels":"false","msgType":"apollo.hdmap.Map","protoPath":"modules/common_msgs/map_msgs/map.proto","websocketInfo":{"websocketName":"map","websocketPipe":"/map"}}}}}}})
    )

    a = "65cdbb3ac7bbb125b913e429,65cdfb53c58396592ef9dd36"

    ws.send(
        json.dumps({"data":{"name":"","info":{"action":"CHANGE_SCENARIO","value": a},"source":"dreamview","target":"dreamview","sourceType":"module","targetType":"dreamview","requestId":"noResponse"},"type":"HMIAction","action":"request"})
    )

    ws.send(
        json.dumps({"action":"metadata","data":{"info":{"code":0,"data":{"dataHandlerInfo":{"apollo.dreamview.CameraUpdate":{"channels":[{"channelName":"/apollo/sensor/camera/front_12mm/image","msgType":"","protoPath":""},{"channelName":"/apollo/sensor/camera/raw/default","msgType":"","protoPath":""},{"channelName":"/apollo/sensor/camera/front_6mm/image","msgType":"","protoPath":""}],"dataName":"camera","differentForChannels":"true","msgType":"apollo.dreamview.CameraUpdate","protoPath":"modules/dreamview/proto/camera_update.proto","websocketInfo":{"websocketName":"camera","websocketPipe":"/camera"}},"apollo.dreamview.Cyber":{"channels":[{"channelName":"/apollo/prediction/perception_obstacles","msgType":"apollo.perception.PerceptionObstacles","protoPath":"modules/common_msgs/perception_msgs/perception_obstacle.proto"},{"channelName":"/apollo/control/pad","msgType":"apollo.control.PadMessage","protoPath":"modules/common_msgs/control_msgs/pad_msg.proto"},{"channelName":"/apollo/planning/pad","msgType":"apollo.planning.PadMessage","protoPath":"modules/common_msgs/planning_msgs/pad_msg.proto"},{"channelName":"/apollo/sensor/camera/right_fisheye/video/compressed","msgType":"apollo.drivers.CompressedImage","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/storytelling","msgType":"apollo.storytelling.Stories","protoPath":"modules/common_msgs/storytelling_msgs/story.proto"},{"channelName":"/apollo/sensor/camera/left_fisheye/video/compressed","msgType":"apollo.drivers.CompressedImage","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/sensor/camera/front_6mm/video/compressed","msgType":"apollo.drivers.CompressedImage","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/planning/command_status","msgType":"apollo.external_command.CommandStatus","protoPath":"modules/common_msgs/external_command_msgs/command_status.proto"},{"channelName":"/apollo/sensor/camera/front_12mm/image","msgType":"apollo.drivers.Image","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/sensor/camera/raw/default","msgType":"apollo.drivers.Image","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/sensor/camera/front_6mm/image","msgType":"apollo.drivers.Image","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/monitor/system_status","msgType":"apollo.monitor.SystemStatus","protoPath":"modules/common_msgs/monitor_msgs/system_status.proto"},{"channelName":"/apollo/navigation","msgType":"apollo.relative_map.NavigationInfo","protoPath":"modules/common_msgs/planning_msgs/navigation.proto"},{"channelName":"/apollo/audio_detection","msgType":"apollo.audio.AudioDetection","protoPath":"modules/common_msgs/audio_msgs/audio.proto"},{"channelName":"/apollo/dreamview/plugins/studio_connector/plugin_response","msgType":"apollo.dreamview.DvPluginMsg","protoPath":"modules/dreamview/proto/dv_plugin_msg.proto"},{"channelName":"/apollo/task_manager","msgType":"apollo.task_manager.Task","protoPath":"modules/common_msgs/task_manager_msgs/task_manager.proto"},{"channelName":"/apollo/monitor","msgType":"apollo.common.monitor.MonitorMessage","protoPath":"modules/common_msgs/monitor_msgs/monitor_log.proto"},{"channelName":"/apollo/sensor/camera/front_12mm/video/compressed","msgType":"apollo.drivers.CompressedImage","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/dreamview/plugins/studio_connector/dv_request","msgType":"apollo.dreamview.DvPluginMsg","protoPath":"modules/dreamview/proto/dv_plugin_msg.proto"},{"channelName":"/apollo/drive_event","msgType":"apollo.common.DriveEvent","protoPath":"modules/common_msgs/basic_msgs/drive_event.proto"},{"channelName":"/apollo/sensor/camera/rear_6mm/video/compressed","msgType":"apollo.drivers.CompressedImage","protoPath":"modules/common_msgs/sensor_msgs/sensor_image.proto"},{"channelName":"/apollo/routing_response","msgType":"apollo.routing.RoutingResponse","protoPath":"modules/common_msgs/routing_msgs/routing.proto"},{"channelName":"/apollo/common/latency_records","msgType":"apollo.common.LatencyRecordMap","protoPath":"modules/common/latency_recorder/proto/latency_record.proto"},{"channelName":"/apollo/hmi/status","msgType":"apollo.dreamview.HMIStatus","protoPath":"modules/common_msgs/dreamview_msgs/hmi_status.proto"},{"channelName":"/apollo/prediction","msgType":"apollo.prediction.PredictionObstacles","protoPath":"modules/common_msgs/prediction_msgs/prediction_obstacle.proto"},{"channelName":"/apollo/audio_event","msgType":"apollo.audio.AudioEvent","protoPath":"modules/common_msgs/audio_msgs/audio_event.proto"},{"channelName":"/apollo/localization/pose","msgType":"apollo.localization.LocalizationEstimate","protoPath":"modules/common_msgs/localization_msgs/localization.proto"},{"channelName":"/apollo/control","msgType":"apollo.control.ControlCommand","protoPath":"modules/common_msgs/control_msgs/control_cmd.proto"},{"channelName":"/apollo/canbus/chassis","msgType":"apollo.canbus.Chassis","protoPath":"modules/common_msgs/chassis_msgs/chassis.proto"},{"channelName":"/apollo/planning","msgType":"apollo.planning.ADCTrajectory","protoPath":"modules/common_msgs/planning_msgs/planning.proto"},{"channelName":"/apollo/planning/command","msgType":"apollo.planning.PlanningCommand","protoPath":"modules/common_msgs/planning_msgs/planning_command.proto"},{"channelName":"/apollo/planning/learning_data","msgType":"apollo.planning.PlanningLearningData","protoPath":"modules/planning/planning_base/proto/learning_data.proto"},{"channelName":"/apollo/planning_command_history","msgType":"apollo.planning.PlanningCommand","protoPath":"modules/common_msgs/planning_msgs/planning_command.proto"}],"dataName":"cyber","differentForChannels":"true","msgType":"","protoPath":"","websocketInfo":{"websocketName":"channelsinfo","websocketPipe":"/channelsinfo"}},"apollo.dreamview.HMIStatus":{"channels":[],"dataName":"hmistatus","differentForChannels":"false","msgType":"apollo.dreamview.HMIStatus","protoPath":"modules/common_msgs/dreamview_msgs/hmi_status.proto","websocketInfo":{"websocketName":"hmistatus","websocketPipe":"/hmistatus"}},"apollo.dreamview.Obstacles":{"channels":[{"channelName":"/apollo/prediction/perception_obstacles","msgType":"","protoPath":""}],"dataName":"obstacle","differentForChannels":"true","msgType":"apollo.dreamview.Obstacles","protoPath":"modules/dreamview_plus/proto/obstacle.proto","websocketInfo":{"websocketName":"obstacle","websocketPipe":"/obstacle"}},"apollo.dreamview.PointCloud":{"channels":[],"dataName":"pointcloud","differentForChannels":"true","msgType":"apollo.dreamview.PointCloud","protoPath":"modules/dreamview/proto/point_cloud.proto","websocketInfo":{"websocketName":"pointcloud","websocketPipe":"/pointcloud"}},"apollo.dreamview.SimulationWorld":{"channels":[],"dataName":"simworld","differentForChannels":"false","msgType":"apollo.dreamview.SimulationWorld","protoPath":"modules/common_msgs/dreamview_msgs/simulation_world.proto","websocketInfo":{"websocketName":"simworld","websocketPipe":"/simworld"}},"apollo.hdmap.Map":{"channels":[],"dataName":"map","differentForChannels":"false","msgType":"apollo.hdmap.Map","protoPath":"modules/common_msgs/map_msgs/map.proto","websocketInfo":{"websocketName":"map","websocketPipe":"/map"}}}}}}})
    )

    ws.send(
        json.dumps({"data":{"name":"","info":{"action":"CHANGE_VEHICLE","value":"Mkz Lgsvl 321"},"source":"dreamview","target":"dreamview","sourceType":"module","targetType":"dreamview","requestId":"noResponse"},"type":"HMIAction","action":"request"})
    )

    ws.send(
        json.dumps({"data":{"name":"","info":{"action":"RESET_MODE"},"source":"dreamview","target":"dreamview","sourceType":"module","targetType":"dreamview","requestId":"noResponse"},"type":"HMIAction","action":"request"})
    )

    ws.send(
        json.dumps({"data":{"name":"","info":{"action":"SETUP_MODE"},"source":"dreamview","target":"dreamview","sourceType":"module","targetType":"dreamview","requestId":"noResponse"},"type":"HMIAction","action":"request"})
    )
    
    ws.send(
       json.dumps({"data":{"name":"","info":"","source":"dreamview","target":"dreamview","sourceType":"module","targetType":"dreamview","requestId":"noResponse"},"type":"ResetScenarioSimulation","action":"request"}) 
    )

    ws.send(
        json.dumps({"data":{"name":"","info":{"fromScenario":"true"},"source":"dreamview","target":"dreamview","sourceType":"module","targetType":"dreamview","requestId":"SendScenarioSimulationRequest!vfBGpqVfmJefSb3zfH9Gf1"},"type":"SendScenarioSimulationRequest","action":"request"})
    )